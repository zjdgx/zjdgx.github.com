<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="date" content="2013/12/18">
   <title>JavaScript拖拽 - ZJDGX</title>
   <link rel="stylesheet" href="../../style/notes.css" />
</head>
<body>
    <h1>JavaScript拖拽</h1>
	<div class="content">
    <pre class='prettyprint'>
function Drag(id) {
   var $ = function (flag) {
      return document.getElementById(flag);
   }

   $(id).onmousedown = function (e) {
      var d = document, dv = this;
      var page = {
         event: function (evt) {
            var ev = evt || window.event;
            return ev;
         },
         pageX: function (evt) {
            var e = this.event(evt);
            return e.pageX || (e.clientX + document.body.scrollLeft - document.body.clientLeft);
         },
         pageY: function (evt) {
            var e = this.event(evt);
            return e.pageY || (e.clientY + document.body.scrollTop - document.body.clientTop);

         },
         layerX: function (evt) {
            var e = this.event(evt);
            return e.layerX || e.offsetX;
         },
         layerY: function (evt) {
            var e = this.event(evt);
            return e.layerY || e.offsetY;
         }
      }
      var x = page.layerX(e);
      var y = page.layerY(e);
      if (dv.setCapture) {
         dv.setCapture();
      }
      else if (window.captureEvents) {
         window.captureEvents(Event.MOUSEMOVE | Event.MOUSEUP);
      }
      d.onmousemove = function (e) {
         var tx = page.pageX(e) - x;
         var ty = page.pageY(e) - y;
         dv.style.left = tx + "px";
         dv.style.top = ty + "px";
      }
      d.onmouseup = function () {
         if (dv.releaseCapture) {
            dv.releaseCapture();
         }
         else if (window.releaseEvents) {
            window.releaseEvents(Event.MOUSEMOVE | Event.MOUSEUP);
         }
         d.onmousemove = null;
         d.onmouseup = null;
      }
   }
}</pre>
	</div>
</body>
</html>